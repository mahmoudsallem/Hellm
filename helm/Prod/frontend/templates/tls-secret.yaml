{{- if .Values.tls.enabled }}
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: {{ .Values.tls.secretName }}
  namespace: {{ .Values.namespace }}
  labels:
    {{- include "frontend.labels" . | nindent 4 }}
spec:
  # IMPORTANT: encryptedData values must be sealed using kubeseal
  # To seal TLS cert/key: kubeseal --raw --namespace <namespace> --name <secret-name>
  encryptedData:
    # Sealed TLS certificate
    tls.crt: {{ .Values.tls.crtSealed | quote }}
    # Sealed TLS private key
    tls.key: {{ .Values.tls.keySealed | quote }}
  template:
    type: kubernetes.io/tls
    metadata:
      name: {{ .Values.tls.secretName }}
      namespace: {{ .Values.namespace }}
      labels:
        {{- include "frontend.labels" . | nindent 8 }}
{{- end }}
