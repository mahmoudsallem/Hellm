# =============================================================================
# Backend Helm Chart - values.yaml
# =============================================================================

# Namespace configuration
namespace: backend-ns

# Deployment configuration
replicaCount: 1

# Docker image configuration
image:
  repository: 288378107043.dkr.ecr.us-east-1.amazonaws.com/final/backend  # Amazon ECR repository
  tag: "latest"
  pullPolicy: Always

autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 50

resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 200m
    memory: 256Mi

# Init container for waiting on services
initContainer:
  image: busybox
  pullPolicy: IfNotPresent

# Container port
containerPort: 5000

# Service configuration
service:
  type: ClusterIP
  port: 5000

# Database namespace (for constructing service addresses)
dbNamespace: db-ns

# ConfigMap configuration (app-config)
# PostgreSQL connection details for the backend application
config:
  # PostgreSQL service hostname (statefulset pod-0 in db-ns namespace)
  postgresHost: postgres-0.postgres.db-ns.svc.cluster.local
  # PostgreSQL service port
  postgresPort: "5432"
  # PostgreSQL database name
  postgresDb: backend

# Secret configuration (app-secret)
# PostgreSQL credentials - will be base64 encoded automatically by Helm
secrets:
  # PostgreSQL database username
  postgresUser: appuser
  # PostgreSQL database password
  postgresPassword: apppass

# Network Policy configuration
networkPolicy:
  enabled: true
  frontendNamespace: frontend-ns
  ingressNamespace: ingress-nginx

# =============================================================================
# Image Pull Secrets Configuration
# =============================================================================
# DISABLED: Images are public on Docker Hub, no credentials needed
imageCredentials:
  enabled: false  # Set to true only if using private Docker images
  name: regcred
  registry: "https://index.docker.io/v1/"
  username: "mostafakassas55"
  password: ""  # Only needed if enabled is true
  email: "elkassasmostafa29@gmail.com"

# Resource Quota
resourceQuota:
  enabled: true
  hard:
    pods: "10"
    requests:
      cpu: "1"
      memory: 1Gi
    limits:
      cpu: "2"
      memory: 2Gi


